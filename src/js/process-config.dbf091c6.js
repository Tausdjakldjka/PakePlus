"use strict";(self.webpackChunkhelper=self.webpackChunkhelper||[]).push([[365],{13688:function(e,n,t){var o=t(71354),i=t.n(o),r=t(76314),s=t.n(r)()(i());s.push([e.id,".process-config-app {\n  display: -ms-flexbox;\n  display: flex;\n  height: 100%;\n  font-family: sans-serif;\n}\n","",{version:3,sources:["webpack://./src/view/Config/ProcessConfig/styles/index.less"],names:[],mappings:"AAAA;EACE,oBAAa;EAAb,aAAa;EACb,YAAY;EACZ,uBAAuB;AACzB",sourcesContent:[".process-config-app {\n  display: flex;\n  height: 100%;\n  font-family: sans-serif;\n}\n"],sourceRoot:""}]),n.A=s},15639:function(e,n,t){var o=t(71354),i=t.n(o),r=t(76314),s=t.n(r)()(i());s.push([e.id,".process-config-toolbar {\n  position: absolute;\n  bottom: 10px;\n  left: 50%;\n  -ms-transform: translateX(-50%);\n      transform: translateX(-50%);\n  background: rgba(255, 255, 255, 0.9);\n  padding: 8px 12px;\n  border-radius: 8px;\n  display: -ms-flexbox;\n  display: flex;\n  gap: 10px;\n  z-index: 20;\n}\n.process-config-toolbar button {\n  padding: 6px 12px;\n  border: 1px solid #d9d9d9;\n  border-radius: 4px;\n  background: #fff;\n  cursor: pointer;\n  font-size: 14px;\n}\n.process-config-toolbar button:hover {\n  background: #f5f5f5;\n  border-color: #40a9ff;\n}\n.process-config-toolbar button:active {\n  background: #e6f7ff;\n}\n","",{version:3,sources:["webpack://./src/view/Config/ProcessConfig/styles/Toolbar.less"],names:[],mappings:"AAAA;EACE,kBAAkB;EAClB,YAAY;EACZ,SAAS;EACT,+BAA2B;MAA3B,2BAA2B;EAC3B,oCAAoC;EACpC,iBAAiB;EACjB,kBAAkB;EAClB,oBAAa;EAAb,aAAa;EACb,SAAS;EACT,WAAW;AACb;AACA;EACE,iBAAiB;EACjB,yBAAyB;EACzB,kBAAkB;EAClB,gBAAgB;EAChB,eAAe;EACf,eAAe;AACjB;AACA;EACE,mBAAmB;EACnB,qBAAqB;AACvB;AACA;EACE,mBAAmB;AACrB",sourcesContent:[".process-config-toolbar {\n  position: absolute;\n  bottom: 10px;\n  left: 50%;\n  transform: translateX(-50%);\n  background: rgba(255, 255, 255, 0.9);\n  padding: 8px 12px;\n  border-radius: 8px;\n  display: flex;\n  gap: 10px;\n  z-index: 20;\n}\n.process-config-toolbar button {\n  padding: 6px 12px;\n  border: 1px solid #d9d9d9;\n  border-radius: 4px;\n  background: #fff;\n  cursor: pointer;\n  font-size: 14px;\n}\n.process-config-toolbar button:hover {\n  background: #f5f5f5;\n  border-color: #40a9ff;\n}\n.process-config-toolbar button:active {\n  background: #e6f7ff;\n}\n"],sourceRoot:""}]),n.A=s},22311:function(e,n,t){var o=t(71354),i=t.n(o),r=t(76314),s=t.n(r)()(i());s.push([e.id,".process-config-canvas-area {\n  -ms-flex: 1 1;\n      flex: 1 1;\n  position: relative;\n  background: #e0e0e0;\n  overflow: hidden;\n}\n.process-config-canvas-bg {\n  width: 100%;\n  height: 100%;\n  object-fit: contain;\n  position: absolute;\n  top: 0;\n  left: 0;\n  z-index: 0;\n}\n","",{version:3,sources:["webpack://./src/view/Config/ProcessConfig/styles/CanvasArea.less"],names:[],mappings:"AAAA;EACE,aAAO;MAAP,SAAO;EACP,kBAAkB;EAClB,mBAAmB;EACnB,gBAAgB;AAClB;AACA;EACE,WAAW;EACX,YAAY;EACZ,mBAAmB;EACnB,kBAAkB;EAClB,MAAM;EACN,OAAO;EACP,UAAU;AACZ",sourcesContent:[".process-config-canvas-area {\n  flex: 1;\n  position: relative;\n  background: #e0e0e0;\n  overflow: hidden;\n}\n.process-config-canvas-bg {\n  width: 100%;\n  height: 100%;\n  object-fit: contain;\n  position: absolute;\n  top: 0;\n  left: 0;\n  z-index: 0;\n}\n"],sourceRoot:""}]),n.A=s},26655:function(e,n,t){e.exports=t.p+"images/siteImg.70118a78..png"},47653:function(e,n,t){var o=t(71354),i=t.n(o),r=t(76314),s=t.n(r)()(i());s.push([e.id,".process-config-device-icon {\n  position: relative;\n  width: 100%;\n  height: 100%;\n  display: -ms-flexbox;\n  display: flex;\n  -ms-flex-align: center;\n      align-items: center;\n  -ms-flex-pack: center;\n      justify-content: center;\n}\n.process-config-device-icon img {\n  width: 100%;\n  height: 100%;\n  object-fit: contain;\n  max-width: 100%;\n  max-height: 100%;\n}\n","",{version:3,sources:["webpack://./src/view/Config/ProcessConfig/styles/DeviceIcon.less"],names:[],mappings:"AAAA;EACE,kBAAkB;EAClB,WAAW;EACX,YAAY;EACZ,oBAAa;EAAb,aAAa;EACb,sBAAmB;MAAnB,mBAAmB;EACnB,qBAAuB;MAAvB,uBAAuB;AACzB;AACA;EACE,WAAW;EACX,YAAY;EACZ,mBAAmB;EACnB,eAAe;EACf,gBAAgB;AAClB",sourcesContent:[".process-config-device-icon {\n  position: relative;\n  width: 100%;\n  height: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n.process-config-device-icon img {\n  width: 100%;\n  height: 100%;\n  object-fit: contain;\n  max-width: 100%;\n  max-height: 100%;\n}\n"],sourceRoot:""}]),n.A=s},68826:function(e,n,t){t.r(n),t.d(n,{default:function(){return oe}});var o=t(50697),i=t.n(o),r=t(26100),s=t.n(r),a=t(96319),c=t.n(a),A=t(78928),l=t.n(A),d=t(36751),f=t.n(d),u=t(49859),p=t(53474),g=t(38008),m=t(11393),h=t.n(m),b=t(48079),v=t.n(b),E=t(85569),C=t.n(E),B=(t(79432),t(26099),t(23500),t(96540)),x=t(85072),y=t.n(x),w=t(97825),k=t.n(w),S=t(77659),P=t.n(S),j=t(55056),z=t.n(j),T=t(10540),D=t.n(T),N=t(41113),Y=t.n(N),F=t(81804),I={};I.styleTagTransform=Y(),I.setAttributes=z(),I.insert=P().bind(null,"head"),I.domAPI=k(),I.insertStyleElement=D();y()(F.A,I),F.A&&F.A.locals&&F.A.locals;var M=[{type:"pump",label:"泵"},{type:"sensor",label:"传感器"},{type:"valve",label:"阀门"}];function W(e){var n=e.onAdd;return B.createElement("div",{className:"process-config-device-list"},B.createElement("h3",null,"设备列表"),v()(M).call(M,function(e){return B.createElement("div",{key:e.type,className:"process-config-device-item",onClick:function(){return n(e.type)}},B.createElement("span",null,e.label))}))}t(9868);var O=t(56255),R=t.n(O),Z=t(8628),X=t.n(Z),q=t(77698),L=t(47653),U={};U.styleTagTransform=Y(),U.setAttributes=z(),U.insert=P().bind(null,"head"),U.domAPI=k(),U.insertStyleElement=D();y()(L.A,U),L.A&&L.A.locals&&L.A.locals;function H(e){var n=e.device,o=e.style;return B.createElement("div",{className:"process-config-device-icon",style:o},B.createElement("img",{src:t(77642),alt:n.type}))}var J=t(22311),G={};G.styleTagTransform=Y(),G.setAttributes=z(),G.insert=P().bind(null,"head"),G.domAPI=k(),G.insertStyleElement=D();y()(J.A,G),J.A&&J.A.locals&&J.A.locals;function K(e){var n=e.devices,o=e.onUpdateDevice,i=e.onDevicesChange,r=(0,B.useState)(n),s=(0,g.A)(r,2),a=s[0],A=s[1],l=(0,B.useState)({width:800,height:600}),d=(0,g.A)(l,2),f=d[0],u=d[1];(0,B.useEffect)(function(){A(n)},[n]),(0,B.useEffect)(function(){var e=null,n=function(){e&&clearTimeout(e),e=R()(function(){var e=document.querySelector(".process-config-canvas-area");if(e){var n={width:e.clientWidth,height:e.clientHeight};n.width===f.width&&n.height===f.height||u(n)}},150)};n(),window.addEventListener("resize",n);var t=new MutationObserver(function(e){e.some(function(e){if("attributes"===e.type&&"class"===e.attributeName){var n,t,o,i=e.target;return X()(n=i.className).call(n,"collapsed")||X()(t=i.className).call(t,"sidebar")||X()(o=i.className).call(o,"menu")}return!1})&&n()}),o=document.querySelector(".ant-layout")||document.body;return t.observe(o,{attributes:!0,attributeFilter:["class"],subtree:!0}),function(){e&&clearTimeout(e),window.removeEventListener("resize",n),t.disconnect()}},[f.width,f.height]);var p=function(){return f};return B.createElement("div",{className:"process-config-canvas-area",style:{position:"relative",width:"100%",height:"100%"}},B.createElement("img",{src:t(26655),alt:"背景图",className:"process-config-canvas-bg"}),v()(a).call(a,function(e){var n=function(e){var n=p(),t=n.width,o=n.height,i=parseFloat(e.left)||0,r=parseFloat(e.top)||0,s=parseFloat(e.width)||10,a=parseFloat(e.height)||10;return{x:i/100*t,y:r/100*o,width:(s=Math.max(3,Math.min(50,s)))/100*t,height:(a=Math.max(3,Math.min(50,a)))/100*o}}(e),t=n.x,r=n.y,s=n.width,l=n.height;return B.createElement(q.p,{key:e.id+e.left+e.top+e.width+e.height,position:{x:t,y:r},size:{width:s,height:l},onDragStop:function(n,t){return function(e,n){var t=p(),i=t.width,r=t.height,s=n.x/i*100,a=n.y/r*100;s.toFixed(2),a.toFixed(2),o(e,{left:s.toFixed(2)+"%",top:a.toFixed(2)+"%"})}(e.id,t)},onResizeStop:function(n,t,i,r,s){return function(e,n,t,i,r,s){var a=p(),c=a.width,A=a.height,l=s.x/c*100,d=s.y/A*100,f=i.offsetWidth/c*100,u=i.offsetHeight/A*100,g={left:l.toFixed(2)+"%",top:d.toFixed(2)+"%",width:f.toFixed(2)+"%",height:u.toFixed(2)+"%"};o(e,g)}(e.id,0,0,i,0,s)},bounds:"parent",style:{border:"2px dashed #ccc",background:"rgba(255, 0, 0, 0.1)"},resizeHandleStyles:{bottomRight:{background:"#fff",border:"1px solid #ddd",borderRadius:"2px",width:"10px",height:"10px"}}},B.createElement("button",{style:{position:"absolute",top:"-10px",right:"-10px",width:"20px",height:"20px",border:"none",borderRadius:"50%",backgroundColor:"#ff4d4f",color:"white",fontSize:"12px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,pointerEvents:"auto"},onMouseDown:function(n){return function(e,n){n.stopPropagation(),n.preventDefault();var t=c()(a).call(a,function(n){return n.id!==e});A(t),i&&i(t)}(e.id,n)},title:"删除设备"},"×"),B.createElement("div",{style:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",userSelect:"none",pointerEvents:"none"},onDragStart:function(e){e.preventDefault(),e.stopPropagation()}},B.createElement("div",{style:{width:"100%",height:"100%",pointerEvents:"none",userSelect:"none",WebkitUserDrag:"none"},onDragStart:function(e){return e.preventDefault(),!1}},B.createElement(H,{device:e,style:{width:"100%",height:"100%"}}))))}))}var Q=t(15639),V={};V.styleTagTransform=Y(),V.setAttributes=z(),V.insert=P().bind(null,"head"),V.domAPI=k(),V.insertStyleElement=D();y()(Q.A,V),Q.A&&Q.A.locals&&Q.A.locals;function $(e){var n=e.onSave,t=e.onLoad,o=e.onClear;return B.createElement("div",{className:"process-config-toolbar"},B.createElement("button",{onClick:n},"保存"),B.createElement("button",{onClick:t},"加载"),B.createElement("button",{onClick:o},"清除"))}var _=t(13688),ee={};ee.styleTagTransform=Y(),ee.setAttributes=z(),ee.insert=P().bind(null,"head"),ee.domAPI=k(),ee.insertStyleElement=D();y()(_.A,ee),_.A&&_.A.locals&&_.A.locals;function ne(e,n){var t=i()(e);if(s()){var o=s()(e);n&&(o=c()(o).call(o,function(n){return l()(e,n).enumerable})),t.push.apply(t,o)}return t}function te(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?ne(Object(t),!0).forEach(function(n){(0,u.A)(e,n,t[n])}):f()?Object.defineProperties(e,f()(t)):ne(Object(t)).forEach(function(n){Object.defineProperty(e,n,l()(t,n))})}return e}function oe(){var e=(0,B.useState)([]),n=(0,g.A)(e,2),t=n[0],o=n[1];(0,B.useRef)(null);(0,B.useEffect)(function(){var e=localStorage.getItem("layout");e&&o(JSON.parse(e))},[]);var i=function(e,n){o(function(t){return v()(t).call(t,function(t){return t.id===e?te(te({},t),n):t})})};return B.createElement("div",{className:"process-config-app"},B.createElement(W,{onAdd:function(e){var n="dev-".concat(Date.now());o(function(t){var o;return h()(o=[]).call(o,(0,p.A)(t),[{id:n,type:e,top:"10%",left:"10%"}])})}}),B.createElement(K,{devices:t,onUpdateDevice:i}),B.createElement($,{onSave:function(){localStorage.setItem("layout",C()(t))},onLoad:function(){var e=localStorage.getItem("layout");e&&o(JSON.parse(e))},onClear:function(){o([])}}))}},77642:function(e,n,t){e.exports=t.p+"images/ysj-blue.141ec121..png"},81804:function(e,n,t){var o=t(71354),i=t.n(o),r=t(76314),s=t.n(r)()(i());s.push([e.id,".process-config-device-list {\n  width: 150px;\n  padding: 10px;\n  background: #f3f3f3;\n  border-right: 1px solid #ccc;\n}\n.process-config-device-item {\n  margin-bottom: 10px;\n  cursor: pointer;\n  display: -ms-flexbox;\n  display: flex;\n  -ms-flex-align: center;\n      align-items: center;\n}\n.process-config-device-item img {\n  width: 32px;\n  height: 32px;\n  margin-right: 8px;\n}\n","",{version:3,sources:["webpack://./src/view/Config/ProcessConfig/styles/DeviceList.less"],names:[],mappings:"AAAA;EACE,YAAY;EACZ,aAAa;EACb,mBAAmB;EACnB,4BAA4B;AAC9B;AACA;EACE,mBAAmB;EACnB,eAAe;EACf,oBAAa;EAAb,aAAa;EACb,sBAAmB;MAAnB,mBAAmB;AACrB;AACA;EACE,WAAW;EACX,YAAY;EACZ,iBAAiB;AACnB",sourcesContent:[".process-config-device-list {\n  width: 150px;\n  padding: 10px;\n  background: #f3f3f3;\n  border-right: 1px solid #ccc;\n}\n.process-config-device-item {\n  margin-bottom: 10px;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n}\n.process-config-device-item img {\n  width: 32px;\n  height: 32px;\n  margin-right: 8px;\n}\n"],sourceRoot:""}]),n.A=s}}]);